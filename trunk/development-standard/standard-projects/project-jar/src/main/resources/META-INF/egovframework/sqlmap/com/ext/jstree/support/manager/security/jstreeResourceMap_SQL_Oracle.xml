<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="secureObject">
	<typeAlias alias="SecuredObject"
		type="egovframework.com.ext.jstree.support.manager.security.roles.vo.SecuredObject" />
		
	<select id="getRolesAndUrl" parameterClass="SecuredObject" resultClass="SecuredObject">
			  SELECT A.C_PATTERN PATTERN, C.C_AUTHORITY AUTHORITY
                FROM T_SECURE_RESOURCE A, T_SECURE_ROLES_RESOURCES B, T_SECURE_ROLES C
               WHERE     A.C_ID = B.C_RESOURCES_ID
                     AND B.C_ROLES_ID = C.C_ID
                     AND A.C_RESOURCE_TYPE = 'URL'
            ORDER BY A.C_SORT
	</select>
	
	<select id="getRolesAndMethod" parameterClass="SecuredObject" resultClass="SecuredObject">
		SELECT A.C_PATTERN PATTERN, C.C_AUTHORITY AUTHORITY
                FROM T_SECURE_RESOURCE A, T_SECURE_ROLES_RESOURCES B, T_SECURE_ROLES C
               WHERE     A.C_ID = B.C_RESOURCES_ID
                     AND B.C_ROLES_ID = C.C_ID
                     AND A.C_RESOURCE_TYPE = 'METHOD'
            ORDER BY A.C_SORT
	</select>
	
	<select id="getRolesAndPointcut" parameterClass="SecuredObject" resultClass="SecuredObject">
		SELECT A.C_PATTERN PATTERN, C.C_AUTHORITY AUTHORITY
                FROM T_SECURE_RESOURCE A, T_SECURE_ROLES_RESOURCES B, T_SECURE_ROLES C
               WHERE     A.C_ID = B.C_RESOURCES_ID
                     AND B.C_ROLES_ID = C.C_ID
                     AND A.C_RESOURCE_TYPE = 'POINTCUT'
            ORDER BY A.C_SORT
	</select>
	
</sqlMap>