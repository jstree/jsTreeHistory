<?xml version="1.0" encoding="UTF-8"?>
<!--

	Copyright 2008 Marvin Herman Froeder
	Licensed under the Apache License, Version 2.0 (the "License");
	you may not use this file except in compliance with the License.
	You may obtain a copy of the License at

		http://www.apache.org/licenses/LICENSE-2.0

	Unless required by applicable law or agreed to in writing, software
	distributed under the License is distributed on an "AS IS" BASIS,
	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	See the License for the specific language governing permissions and
	limitations under the License.

-->
<!--
<web-app version="2.4" id="standardWebAppProject"
		 xmlns="http://java.sun.com/xml/ns/j2ee"
		 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		 xmlns:web="http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
		 xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
		 -->
<web-app version="2.5" id="standardWebAppProject"
		 xmlns="http://java.sun.com/xml/ns/javaee"
		 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

	<!--
	수정일          수성자                          수정내용
   	==========      ========      =================================================
   	2011.9.19		이기하			filter 정리
   	2013.5.31		이기하			미사용 filter 정리(.mdo, .action)
   	2014.7.07		최대열			(security 3.0) egov3.0.0b 이관 cf) http://www.egovframe.go.kr/wiki/doku.php?id=egovframework:rte3:fdl:server_security:upgrade
  	************************************************************************************************
	0. 로그인 정책 컴포넌트용 필터 : 주석
	1. 스프링 시큐리티 설정 : 사용
	2. EgovSSO 로그인/로그아웃 설정을 위한 필터 설정 : 주석
	3. Spring Security 로그인/로그아웃 설정을 위한 필터 설정 : 사용
	4. 2.7 version security -> 3.0.1 version security 로 변경 
  	************************************************************************************************
    2014.7.29       류강하          DispatcherServlet에 DWR 사용을 위한 URL 매핑
	-->
	
	<display-name>Standard Development Project</display-name>
	<description>Standard Development Project</description>
	
	<welcome-file-list>
		<welcome-file>index.html</welcome-file>
		<welcome-file>index.htm</welcome-file>
		<welcome-file>index.jsp</welcome-file>
		<welcome-file>default.html</welcome-file>
		<welcome-file>default.htm</welcome-file>
		<welcome-file>default.jsp</welcome-file>
		<welcome-file>egovDevIndex.jsp</welcome-file>
	</welcome-file-list>
	
	<session-config>
		<session-timeout>600</session-timeout>
	</session-config>
	
	<welcome-file-list>
		<welcome-file>index.html</welcome-file>
		<welcome-file>index.htm</welcome-file>
		<welcome-file>index.jsp</welcome-file>
		<welcome-file>default.html</welcome-file>
		<welcome-file>default.htm</welcome-file>
		<welcome-file>default.jsp</welcome-file>
	</welcome-file-list>
	
	<login-config>
		<auth-method>BASIC</auth-method>
	</login-config>
	
	<error-page>
        <exception-type>java.lang.Throwable</exception-type>
        <location>/common/error.jsp</location>
    </error-page>
    <error-page>
        <error-code>404</error-code>
        <location>/common/error.jsp</location>
    </error-page>
    <error-page>
        <error-code>500</error-code>
        <location>/common/error.jsp</location>
    </error-page>
    <error-page>
        <error-code>503</error-code>
        <location>/common/error.jsp</location>
    </error-page>
    
    <!-- 	
    <context-param>
		<param-name>contextConfigLocation</param-name>
		<param-value>
			classpath*:egovframework/spring/context-*.xml
			,classpath*:egovframework/spring/com/context-*.xml
		</param-value>
	</context-param> -->
	<context-param>
		<description>Parent WebappContext Bean Config Location like global.xml</description>
		<param-name>contextClass</param-name>
		<param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
	</context-param>
	<context-param>
		<param-name>contextConfigLocation</param-name>
		<param-value>standard.mvc.config</param-value>
	</context-param>
	<context-param>
		<param-name>profile.active.mode</param-name>
		<param-value>dev</param-value>
<!-- 		<param-value>server</param-value> -->
	</context-param>
	<context-param>
		<param-name>.profiles.active.dbtype</param-name>
		<param-value>oracle</param-value>
<!-- 		<param-value>mysql</param-value> -->
	</context-param>
	<context-param>
	    <param-name>log4jConfigLocation</param-name>
	    <param-value>classpath:log4j.properties</param-value>
	</context-param>
	<context-param>
		<param-name>sitemesh.configfile</param-name>
		<param-value>/WEB-INF/sitemesh/sitemesh.xml</param-value>
	</context-param>
	
    <filter>
        <filter-name>encodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>utf-8</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>encodingFilter</filter-name>
        <url-pattern>*.do</url-pattern>
    </filter-mapping>

	<!--
	HTMLTagFilter의 경우는 파라미터에 대하여 XSS 오류 방지를 위한 변환을 처리합니다.
   우선 HTMLTagFIlter의 경우는 JSP의 <c:out /> 등을 사용하지 못하는 특수한 상황에서 사용하시면 됩니다.
   (<c:out />의 경우 뷰단에서 데이터 출력시 XSS 방지 처리가 됨)
   부득히 HTMLTagFilter를 사용하셔야 하는 경우는 web.xml 상에
   다음과 같이 CertProcessFilter(GPKI 인증 처리 오류 해결) 등록해 주시면 됩니다.
 	-->
    <filter>
        <filter-name>HTMLTagFilter</filter-name>
        <filter-class>egovframework.com.cmm.filter.HTMLTagFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>HTMLTagFilter</filter-name>
        <url-pattern>*.do</url-pattern>
    </filter-mapping>
	<filter>
		<filter-name>sitemesh</filter-name>
		<filter-class>com.opensymphony.module.sitemesh.filter.PageFilter</filter-class>
	</filter>
    <filter-mapping>
		<filter-name>sitemesh</filter-name>
		<url-pattern>/sitemesh/*</url-pattern>
        <dispatcher>FORWARD</dispatcher>
		<dispatcher>REQUEST</dispatcher> 
	</filter-mapping>
	<!-- Restoration from HTMLTagFilter's action (certification login) -->
 	<!--
    <filter>
        <filter-name>CertProcessFilter</filter-name>
        <filter-class>egovframework.com.utl.sec.filter.CertProcessFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>CertProcessFilter</filter-name>
        <url-pattern>/utl/sec/certLogin.do</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>CertProcessFilter</filter-name>
        <url-pattern>/utl/sec/certInfoPopup.do</url-pattern>
    </filter-mapping>
    -->
	<filter>
		<filter-name>struts2</filter-name>
		<filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
	</filter>
     <filter-mapping>
		<filter-name>struts2</filter-name>
		<url-pattern>*.action</url-pattern>
	</filter-mapping>
	
	<!-- 0. 로그인 정책 컴포넌트용 필터 -->
	<!--
    <filter>
        <filter-name>LoginPolicyFilter</filter-name>
        <filter-class>egovframework.com.uat.uap.filter.EgovLoginPolicyFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>LoginPolicyFilter</filter-name>
        <url-pattern>/uat/uia/actionLogin.do</url-pattern>
    </filter-mapping>
     -->
     <!-- 1. 스프링 시큐리티 설정-->
     <!-- 
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    -->
  	<!-- 2. EgovSSO 로그아웃 설정을 위한 필터 설정 -->
    <!--
    <filter>
    	<filter-name>EgovSSOLogoutFilter</filter-name>
    	<filter-class>egovframework.com.uat.sso.filter.EgovSSOLogoutFilter</filter-class>
		<init-param>
			<description>SSO Global Logout 처리후 반환되는 페이지 설정</description>
			<param-name>returnURL</param-name>
			<param-value>/j_spring_security_logout</param-value>
		</init-param>
  	</filter>
  	<filter-mapping>
    	<filter-name>EgovSSOLogoutFilter</filter-name>
    	<url-pattern>/uat/uia/actionLogout.do</url-pattern>
  	</filter-mapping>
  	-->

  	<!-- 2. EgovSSO 로그인 설정을 위한 필터 설정 -->
    <!--
    <filter>
    	<filter-name>EgovSSOLoginFilter</filter-name>
    	<filter-class>egovframework.com.uat.sso.filter.EgovSSOLoginFilter</filter-class>
  	</filter>
  	<filter-mapping>
    	<filter-name>EgovSSOLoginFilter</filter-name>
    	<url-pattern>*.do</url-pattern>
  	</filter-mapping>
  	-->

  	<!-- 3. Spring Security 로그아웃 설정을 위한 필터 설정 -->
  	<!-- 
  	<filter>
    	<filter-name>EgovSpringSecurityLogoutFilter</filter-name>
    	<filter-class>egovframework.com.sec.security.filter.EgovSpringSecurityLogoutFilter</filter-class>
  	</filter>
  	<filter-mapping>
    	<filter-name>EgovSpringSecurityLogoutFilter</filter-name>
    	<url-pattern>/uat/uia/actionLogout.do</url-pattern>
  	</filter-mapping>
	-->
  	<!-- 3. Spring Security 로그인 설정을 위한 필터 설정 -->
  	<!-- 
  	<filter>
    	<filter-name>EgovSpringSecurityLoginFilter</filter-name>
    	<filter-class>egovframework.com.sec.security.filter.EgovSpringSecurityLoginFilter</filter-class>
		<init-param>
			<description>로그인 실패시 반활 될 URL설정</description>
			<param-name>loginURL</param-name>
			<param-value>/uat/uia/egovLoginUsr.do</param-value>
		</init-param>
        <init-param>
            <description>로그인 처리 URL설정</description>
            <param-name>loginProcessURL</param-name>
            <param-value>/uat/uia/actionLogin</param-value>
        </init-param>
  	</filter>
  	<filter-mapping>
    	<filter-name>EgovSpringSecurityLoginFilter</filter-name>
    	<url-pattern>*.do</url-pattern>
  	</filter-mapping>
	-->

    <listener>
        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
      </listener>
	<listener>
		<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
	</listener>
	<listener>
        <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
    </listener>

    <servlet>
		<servlet-name>action</servlet-name>
		<servlet-class>
			org.springframework.web.servlet.DispatcherServlet
		</servlet-class>
		<!-- 원본
		<init-param>
			<param-name>contextConfigLocation</param-name>
			<param-value>
				/WEB-INF/config/egovframework/springmvc/dispatcher-servlet.xml,
				/WEB-INF/config/egovframework/springmvc/urlfilename-servlet.xml,
				/WEB-INF/config/egovframework/springmvc/egov-com-*.xml
			</param-value>
		</init-param> 
		-->
		<init-param>
			<param-name>contextClass</param-name>
			<param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
		</init-param>
		<init-param>
			<param-name>contextConfigLocation</param-name>
			<param-value>standard.mvc.config.WebMvcConfig</param-value>
		</init-param>
		<load-on-startup>1</load-on-startup>
	</servlet>
	<servlet-mapping>
		<servlet-name>action</servlet-name>
		<url-pattern>*.do</url-pattern>
	</servlet-mapping>

    <!-- AjaxTags configuration START-->
    <servlet>
        <servlet-name>ajaxServlet</servlet-name>
        <servlet-class>net.sourceforge.ajaxtags.servlets.SourceLoader</servlet-class>
        <init-param>
            <param-name>prefix</param-name>
            <param-value>/ajaxtags</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>ajaxServlet</servlet-name>
        <url-pattern>/ajaxtags/js/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ajaxServlet</servlet-name>
        <url-pattern>/ajaxtags/img/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ajaxServlet</servlet-name>
        <url-pattern>/ajaxtags/css/*</url-pattern>
    </servlet-mapping>
    
    <jsp-config>
		<jsp-property-group>
			<url-pattern>*.jsp</url-pattern>
			<trim-directive-whitespaces>true</trim-directive-whitespaces>
		</jsp-property-group>
		<jsp-property-group>
			<url-pattern>*.jsp</url-pattern>
			<page-encoding>utf-8</page-encoding>
		</jsp-property-group>
	</jsp-config>

</web-app>